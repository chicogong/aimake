# ================================================
# AIMake 环境变量模板
# ================================================
# 复制此文件为 .env 并填入实际值
# 前端: 复制到 frontend/.env.local
# 后端: 使用 wrangler secret put 或 .dev.vars
# ================================================

# ========================================
# 一、前端环境变量 (VITE_*)
# ========================================
# 注意: 前端变量必须以 VITE_ 开头才能被 Vite 打包

# ---------- 环境配置 ----------
VITE_ENV=development
# 可选: development | staging | production

VITE_API_URL=http://localhost:8787/api
# 开发: http://localhost:8787/api
# 预发: https://api-staging.aimake.cc/api
# 生产: https://api.aimake.cc/api

# ---------- 认证 (Clerk) ----------
VITE_CLERK_PUBLISHABLE_KEY=pk_test_xxx
# 获取地址: https://dashboard.clerk.com → API Keys
# 格式: pk_test_xxx (测试) 或 pk_live_xxx (生产)

# ---------- 支付 (Stripe) ----------
VITE_STRIPE_PUBLISHABLE_KEY=pk_test_xxx
# 获取地址: https://dashboard.stripe.com → Developers → API keys
# 格式: pk_test_xxx (测试) 或 pk_live_xxx (生产)

# ---------- 分析与监控 (可选) ----------
VITE_SENTRY_DSN=
# Sentry 错误监控 DSN
# 获取地址: https://sentry.io → Project Settings → Client Keys (DSN)

VITE_GA_ID=
# Google Analytics 4 Measurement ID
# 格式: G-XXXXXXXXXX

# ---------- 功能开关 ----------
VITE_FEATURE_PODCAST=true
# 播客生成功能

VITE_FEATURE_VOICE_CLONE=false
# 声音克隆功能（需要 ElevenLabs API）

VITE_FEATURE_MULTI_LANGUAGE=false
# 多语言支持


# ========================================
# 二、后端环境变量
# ========================================
# 注意: 后端敏感变量使用 wrangler secret put 设置
# 本地开发可以创建 api/.dev.vars 文件

# ---------- 环境配置 ----------
ENV=development
# 可选: development | staging | production

CORS_ORIGIN=http://localhost:5173
# 允许的跨域来源（逗号分隔多个）
# 生产: https://aimake.cc,https://www.aimake.cc

LOG_LEVEL=debug
# 日志级别: debug | info | warn | error

# ---------- 认证 (Clerk) ----------
CLERK_SECRET_KEY=sk_test_xxx
# ⚠️ 敏感信息 - 使用 wrangler secret put
# 获取地址: https://dashboard.clerk.com → API Keys
# 格式: sk_test_xxx (测试) 或 sk_live_xxx (生产)

CLERK_WEBHOOK_SECRET=whsec_xxx
# ⚠️ 敏感信息 - 使用 wrangler secret put
# 获取地址: https://dashboard.clerk.com → Webhooks → 创建后显示
# 用途: 验证 Webhook 签名

# ---------- 支付 (Stripe) ----------
STRIPE_SECRET_KEY=sk_test_xxx
# ⚠️ 敏感信息 - 使用 wrangler secret put
# 获取地址: https://dashboard.stripe.com → Developers → API keys
# 格式: sk_test_xxx (测试) 或 sk_live_xxx (生产)

STRIPE_WEBHOOK_SECRET=whsec_xxx
# ⚠️ 敏感信息 - 使用 wrangler secret put
# 获取地址: https://dashboard.stripe.com → Developers → Webhooks
# 用途: 验证 Webhook 签名

STRIPE_PRICE_ID_FREE=price_xxx
STRIPE_PRICE_ID_PRO=price_xxx
STRIPE_PRICE_ID_TEAM=price_xxx
# Stripe 价格 ID
# 获取地址: https://dashboard.stripe.com → Products → 选择产品 → API ID


# ========================================
# 三、TTS（文本转语音）供应商
# ========================================
# 详见: docs/planning/tts-free-providers.md

# ---------- 主力: 腾讯云 TTS ----------
TENCENT_SECRET_ID=
# ⚠️ 敏感信息 - 使用 wrangler secret put
# 获取地址: https://console.cloud.tencent.com → 访问管理 → API密钥管理
# 格式: AKIDxxx
# 免费额度: 800万字符（3个月）

TENCENT_SECRET_KEY=
# ⚠️ 敏感信息 - 使用 wrangler secret put
# 腾讯云 Secret Key

TENCENT_TTS_REGION=ap-guangzhou
# 腾讯云 TTS 区域
# 可选: ap-beijing | ap-shanghai | ap-guangzhou

# ---------- 备用: Google Cloud TTS ----------
GOOGLE_APPLICATION_CREDENTIALS=
# Google Cloud Service Account JSON 文件路径
# 获取地址: https://console.cloud.google.com → IAM → Service Accounts
# 本地开发: /path/to/credentials.json
# 生产环境: 将 JSON 内容存为 Secret
# 免费额度: 400万字符/月（持续）

# ---------- 备用: Azure TTS ----------
AZURE_SPEECH_KEY=
# ⚠️ 敏感信息 - 使用 wrangler secret put
# 获取地址: https://portal.azure.com → Speech Services → Keys and Endpoint
# 免费额度: 500万字符/月（12个月）

AZURE_SPEECH_REGION=eastus
# Azure 区域
# 可选: eastus | westus | westeurope | eastasia

# ---------- 备用: Amazon Polly ----------
AWS_ACCESS_KEY_ID=
# ⚠️ 敏感信息 - 使用 wrangler secret put
# 获取地址: https://console.aws.amazon.com → IAM → Users → Security credentials
# 免费额度: 500万字符/月（持续）

AWS_SECRET_ACCESS_KEY=
# ⚠️ 敏感信息 - 使用 wrangler secret put

AWS_REGION=us-east-1
# AWS 区域

# ---------- Pro 用户: OpenAI TTS ----------
OPENAI_API_KEY=
# ⚠️ 敏感信息 - 使用 wrangler secret put
# 获取地址: https://platform.openai.com → API keys
# 格式: sk-xxx
# 用途: 高音质 TTS（Pro 用户专用）
# 价格: $15/百万字符（tts-1）, $30/百万字符（tts-1-hd）

OPENAI_TTS_MODEL=tts-1
# OpenAI TTS 模型
# 可选: tts-1 (标准) | tts-1-hd (高清)

OPENAI_TTS_VOICE=alloy
# OpenAI TTS 音色
# 可选: alloy | echo | fable | onyx | nova | shimmer

# ---------- Pro 用户: MiniMax TTS ----------
MINIMAX_API_KEY=
# ⚠️ 敏感信息 - 使用 wrangler secret put
# 获取地址: https://platform.minimax.io
# 用途: 中文高质量 TTS
# 价格: $30/百万字符（Turbo）, $50/百万字符（HD）

MINIMAX_GROUP_ID=
# MiniMax Group ID

# ---------- Pro 用户: ElevenLabs ----------
ELEVENLABS_API_KEY=
# ⚠️ 敏感信息 - 使用 wrangler secret put
# 获取地址: https://elevenlabs.io → Profile → API Keys
# 用途: 声音克隆、超高音质
# 价格: $300/百万字符

# ---------- TTS 路由策略 ----------
TTS_PROVIDER=tencent
# 主力供应商
# 可选: tencent | google | amazon | azure | openai | minimax | elevenlabs

TTS_FALLBACK_PROVIDER=google
# 备用供应商（主力失败时自动切换）


# ========================================
# 四、LLM（大语言模型）供应商
# ========================================
# 用途: 播客脚本生成、有声书提纲、内容分析
# 详见: docs/planning/llm-asr-providers.md

# ---------- 主力: 硅基流动 ----------
LLM_API_KEY=
# ⚠️ 敏感信息 - 使用 wrangler secret put
# 获取地址: https://siliconflow.cn → API Keys
# 格式: sk-xxx
# 免费额度: 2000万 tokens（可生成 4000 次播客脚本）

LLM_BASE_URL=https://api.siliconflow.cn/v1
# 硅基流动 API 地址（兼容 OpenAI SDK）

LLM_MODEL=Qwen/Qwen2.5-7B-Instruct
# 推荐模型:
# - Qwen/Qwen2.5-7B-Instruct (中文强，速度快)
# - deepseek-ai/DeepSeek-V2.5 (推理能力强)
# - THUDM/glm-4-9b-chat (对话自然)

# ---------- 备用: 智谱 AI ----------
LLM_FALLBACK_API_KEY=
# ⚠️ 敏感信息 - 使用 wrangler secret put
# 获取地址: https://open.bigmodel.cn → API Keys
# 格式: xxx.xxx
# 免费额度: 1000万 tokens

LLM_FALLBACK_BASE_URL=https://open.bigmodel.cn/api/paas/v4

LLM_FALLBACK_MODEL=glm-4-flash
# 智谱 AI 模型

# ---------- 高质量: DeepSeek ----------
DEEPSEEK_API_KEY=
# ⚠️ 敏感信息 - 使用 wrangler secret put
# 获取地址: https://platform.deepseek.com → API Keys
# 格式: sk-xxx
# 免费额度: 500万 tokens
# 用途: 复杂播客对话生成

DEEPSEEK_BASE_URL=https://api.deepseek.com/v1

DEEPSEEK_MODEL=deepseek-chat
# DeepSeek-V3 模型

# ---------- 长文本: Moonshot ----------
MOONSHOT_API_KEY=
# ⚠️ 敏感信息 - 使用 wrangler secret put
# 获取地址: https://platform.moonshot.cn → API Keys
# 格式: sk-xxx
# 免费额度: 15元代金券
# 用途: 有声书生成（支持 200K context）

MOONSHOT_BASE_URL=https://api.moonshot.cn/v1

MOONSHOT_MODEL=moonshot-v1-128k
# Moonshot 模型
# 可选: moonshot-v1-8k | moonshot-v1-32k | moonshot-v1-128k

# ---------- 阿里云百炼 ----------
ALIYUN_API_KEY=
# ⚠️ 敏感信息 - 使用 wrangler secret put
# 获取地址: https://bailian.console.aliyun.com → API-KEY 管理
# 免费额度: 100万 tokens

ALIYUN_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1

ALIYUN_MODEL=qwen-turbo
# 阿里云模型
# 可选: qwen-turbo | qwen-plus | qwen-max


# ========================================
# 五、ASR（语音识别）供应商
# ========================================
# 用途: 播客音频转文字、有声书校对、语音输入
# 详见: docs/planning/llm-asr-providers.md

# ---------- 主力: 腾讯云 ASR ----------
# 复用 TTS 的 TENCENT_SECRET_ID 和 TENCENT_SECRET_KEY
# 免费额度: 10小时（新用户）+ 50,000次/月（每次 ≤60秒）

TENCENT_ASR_ENGINE=16k_zh
# 引擎类型
# 可选: 16k_zh (中文16k) | 8k_zh (中文8k) | 16k_en (英文16k)

# ---------- 备用: 讯飞 ASR ----------
XUNFEI_APP_ID=
# 讯飞 APP ID
# 获取地址: https://console.xfyun.cn → 应用管理
# 免费额度: 500万字符/年（约 200小时）

XUNFEI_API_KEY=
# ⚠️ 敏感信息 - 使用 wrangler secret put
# 讯飞 API Key

XUNFEI_API_SECRET=
# ⚠️ 敏感信息 - 使用 wrangler secret put
# 讯飞 API Secret

# ---------- 备用: 火山引擎 ASR ----------
VOLCANO_APP_ID=
# 火山引擎 APP ID
# 获取地址: https://console.volcengine.com → 语音技术
# 免费额度: 100小时

VOLCANO_ACCESS_TOKEN=
# ⚠️ 敏感信息 - 使用 wrangler secret put
# 火山引擎 Access Token

# ---------- 备用: 阿里云 ASR ----------
ALIYUN_ASR_APP_KEY=
# 阿里云 NLS App Key
# 获取地址: https://nls-portal.console.aliyun.com → 项目管理
# 免费额度: 2小时/月（3个月）

# ---------- ASR 路由策略 ----------
ASR_PROVIDER=tencent
# 主力供应商
# 可选: tencent | xunfei | volcano | aliyun

ASR_FALLBACK_PROVIDER=xunfei
# 备用供应商


# ========================================
# 六、存储服务
# ========================================

# ---------- Cloudflare R2 ----------
# R2 通过 wrangler.toml 配置 Binding，无需 API Key
R2_BUCKET_NAME=aimake-audio
# R2 存储桶名称

R2_PUBLIC_URL=https://audio.aimake.cc
# R2 公开访问域名（绑定自定义域名）

# ---------- AWS S3 (备选) ----------
S3_BUCKET_NAME=
# S3 存储桶名称

S3_REGION=us-east-1
# S3 区域

S3_ENDPOINT=
# S3 Endpoint（如使用 Cloudflare R2 兼容模式）


# ========================================
# 七、数据库与缓存
# ========================================

# ---------- D1 Database ----------
# D1 通过 wrangler.toml 配置 Binding
# 本地开发使用 .wrangler/state/v3/d1/

# ---------- KV Store ----------
# KV 通过 wrangler.toml 配置 Binding

# ---------- Redis (Upstash) ----------
REDIS_URL=
# Upstash Redis URL
# 获取地址: https://console.upstash.com → Redis
# 格式: redis://xxx:xxx@xxx.upstash.io:6379
# 用途: 速率限制、会话缓存

REDIS_TOKEN=
# ⚠️ 敏感信息 - 使用 wrangler secret put
# Upstash Redis Token


# ========================================
# 八、监控与分析
# ========================================

# ---------- Sentry ----------
SENTRY_DSN=
# Sentry DSN（前后端通用）
# 获取地址: https://sentry.io → Project Settings → Client Keys
# 格式: https://xxx@xxx.ingest.sentry.io/xxx

SENTRY_ENVIRONMENT=development
# Sentry 环境标识
# 可选: development | staging | production

# ---------- Logging ----------
LOGTAIL_SOURCE_TOKEN=
# Logtail 日志收集 Token
# 获取地址: https://betterstack.com/logs


# ========================================
# 九、其他配置
# ========================================

# ---------- 限流配置 ----------
RATE_LIMIT_FREE=100
# 免费用户限流：100 请求/分钟

RATE_LIMIT_PRO=1000
# Pro 用户限流：1000 请求/分钟

# ---------- 任务队列 ----------
QUEUE_CONCURRENCY=10
# 任务队列并发数

# ---------- CDN ----------
CDN_URL=https://cdn.aimake.cc
# CDN 域名（Cloudflare）

# ---------- Webhook ----------
WEBHOOK_SECRET=
# ⚠️ 敏感信息 - 使用 wrangler secret put
# 自定义 Webhook 签名密钥


# ========================================
# 十、功能配置
# ========================================

# ---------- 音频配置 ----------
AUDIO_MAX_DURATION=3600
# 最大音频时长（秒），默认 1小时

AUDIO_MAX_FILE_SIZE=52428800
# 最大文件大小（字节），默认 50MB

AUDIO_FORMAT=mp3
# 默认音频格式
# 可选: mp3 | wav | ogg

# ---------- 用户配额 ----------
QUOTA_FREE_MINUTES=10
# 免费用户月配额（分钟）

QUOTA_PRO_MINUTES=300
# Pro 用户月配额（分钟）

QUOTA_TEAM_MINUTES=1000
# 团队版月配额（分钟）


# ========================================
# 开发工具
# ========================================

# ---------- 本地开发端口 ----------
FRONTEND_PORT=5173
# 前端开发服务器端口

API_PORT=8787
# 后端开发服务器端口

# ---------- Mock 数据 ----------
USE_MOCK_DATA=false
# 是否使用 Mock 数据（开发环境）


# ================================================
# 注意事项
# ================================================
# 1. ⚠️ 标记的变量为敏感信息，生产环境必须使用 wrangler secret put 设置
# 2. 前端变量必须以 VITE_ 开头
# 3. 不要提交 .env.local、.dev.vars 到 Git
# 4. 定期轮换 API Keys
# 5. 详细文档: docs/development/env-config.md
# ================================================
